{{!--  
*   This File contains all Javascript files used in the Theme
*   The file is added before the closing body tag on every page
*   Code injection variables are insert 
 --}}

{{!-- jQuery Slim first, then Popper.js, then Bootstrap JS --}}
    <script src="{{asset "js/jquery.min.js"}}"></script>
    <script src="{{asset "js/popper.min.js"}}"></script>
    <script src="{{asset "js/bootstrap.min.js"}}"></script>
    <script src="{{asset "js/scripts.js"}}"></script>
    <script src="{{asset "js/prism.js"}}"></script>
    <script src="{{asset "js/sticky.min.js"}}"></script>

{{!-- Specific initialisation of JS files  --}}

{{!-- TOC Bot  --}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
    <script>
        tocbot.init({
            tocSelector: '.toc',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3',
            hasInnerContainers: true,
        });
    </script>

{{!-- Cookie Banner --}}
    <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
    <script> 
        window.cookieconsent.initialise({
        "palette": {
            "popup": {
                "background": "#A9A9A9",
                "text": "#ffffff" },
            "button": {
                "background": "#000000",
                "text": "#ffffff" }
        },
        "showLink": false,
        "theme": "edgeless",
        "position": "bottom-left",
        "content": {
            "message": "We use cookies. You cannot eat it but please accept it.",
            "dismiss": "Accept" }
        });
    </script>


{{!-- Matomo --}}
        <script type="text/javascript">
        //Only if Matomo was enabled
        if(matomo){
            var _paq = window._paq || [];
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function() {
                var u = matomoserver;
                var s = matomoid;
                _paq.push(['setTrackerUrl', u+'matomo.php']);
                _paq.push(['setSiteId', s]);
                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
            })();
        }
        </script>


{{!-- Theme Selector--}}
<script>
    //Get the local theme 
    const localTheme = localStorage.getItem("marie_data-theme");
    
    //Set local theme if already selected - for coming back users
    if (localTheme !== null) {
        document.body.setAttribute('data-theme', localTheme);        
    }
    else{
        document.body.setAttribute('data-theme', theme);
    }

    //Initialize the sticky class
    var sticky = new Sticky('.sticky');
</script>
